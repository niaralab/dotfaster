# optimization for zsh
# source: http://www.zsh.org/mla/users/2005/msg00423.html
#
# The zrecompile module is used to seepd up zsh startup
# ceating optimized zsh files

src () {
	autoload -U zrecompile
	cd ${ZDOTDIR:-$HOME}

	zrecompile -p .zshrc
	zrecompile -p .zshenv
	zrecompile -p .zlogout
	zrecompile -p .zlogin
    zrecompile -p .zcompdump
	rm -f *.old(.N)

	for f in $ZDOTDIR/functions.d/^(*.zwc)(.); do
		zrecompile -p $f
		rm -f $f.zwc.old
    done

	for f in $ZDOTDIR/plugins/**/*.zsh; do
		zrecompile -p $f
		rm -f $f.zwc.old
    done

}
